webpackJsonp([1],{0:function(t,e){},"9M+g":function(t,e){},Jmt5:function(t,e){},KTDh:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("7+uW"),o=n("e6fC"),l=n.n(o),r=n("HI0L"),s=n.n(r),a=n("DmT9"),d=n.n(a),c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"navbar"}},[n("b-navbar",{attrs:{toggleable:"md",type:"dark",variant:"info"}},[n("b-nav-toggle",{attrs:{target:"nav_collapse"}}),t._v(" "),n("b-navbar-brand",[t._v("Macloc")]),t._v(" "),n("b-collapse",{attrs:{"is-nav":"",id:"nav_collapse"}},[n("b-navbar-nav",t._l(t.routes,function(e){return n("b-nav-item",{key:e.name,attrs:{to:e}},[t._v(t._s(e.label))])}))],1)],1)],1)},staticRenderFns:[]},u={name:"app",components:{Navbar:n("VU/8")({name:"Navbar",computed:{routes:function(){var t=[];for(var e in this.$router.options.routes)if(this.$router.options.routes.hasOwnProperty(e)){var n=this.$router.options.routes[e];n.hasOwnProperty("label")&&t.push(n)}return t}}},c,!1,null,null,null).exports}},m={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("navbar"),this._v(" "),e("b-container",[e("router-view")],1)],1)},staticRenderFns:[]};var f=n("VU/8")(u,m,!1,function(t){n("YV4C")},null,null).exports,h=n("/ocq"),b=n("Dd8w"),p=n.n(b),v=n("NYxO"),g=n("vwbq"),_=n("mtWM"),w="http://2.238.75.128/",I=w+"api/static/",C=n.n(_).a.create({baseURL:w+"api/"});function H(t){var e=[];for(var n in t)null!=t[n]&&e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return"?"+e.join("&")}function y(t){console.log("error during remote call:"),console.log(t)}function x(t){return I+"walls/"+t}var U={props:{wallId:Number},data:function(){return{svgContainer:{}}},computed:p()({},Object(v.d)({rtholds:function(t){return t.realtime.rtholds}}),Object(v.c)({getForceByHoldId:"realtime/getForceByHoldId",ongoingClimb:"realtime/ongoingClimb"}),{holds:function(){return void 0===this.ongoingClimb(this.wallId)||void 0===this.ongoingClimb(this.wallId).holds?[]:this.ongoingClimb(this.wallId).holds},graphicHolds:function(){var t=this,e=this.holds.map(function(e){var n={},i=e.dist_from_bot/t.ongoingClimb(t.wallId).height*100;return n.percentFromTop=100-i,n.percentFromLeft=e.dist_from_sx/t.ongoingClimb(t.wallId).width*100,n.forceFromTop=n.percentFromTop+t.getForceByHoldId("y",e.id)/30,n.forceFromLeft=n.percentFromLeft+t.getForceByHoldId("x",e.id)/30,n});return e}}),watch:{rtholds:{handler:function(t,e){this.drawForces()},deep:!0},graphicHolds:{handler:function(t,e){this.drawHolds(),this.drawForces()},deep:!0}},methods:{getOngoingWallImg:function(){return x(this.ongoingClimb(this.wallId).img)},drawWall:function(){this.svgContainer=g.a("#wall").append("svg").attr("width","100%").attr("height","100%"),this.svgContainer.append("defs").append("marker").attr("id","arrow").attr("viewBox","0 -5 10 10").attr("refX",5).attr("refY",0).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M0,-5L10,0L0,5").attr("class","arrowHead")},drawHolds:function(){var t=this.svgContainer.selectAll("circle").data(this.graphicHolds);t.exit().remove(),t.enter().append("circle").merge(t).attr("cx",function(t){return t.percentFromLeft+"%"}).attr("cy",function(t){return t.percentFromTop+"%"}).attr("r",40).style("fill","green")},drawForces:function(){var t=this.svgContainer.selectAll("line").data(this.graphicHolds);t.exit().remove(),t.enter().append("line").merge(t).attr("x1",function(t){return t.percentFromLeft+"%"}).attr("y1",function(t){return t.percentFromTop+"%"}).transition().attr("x2",function(t){return t.forceFromLeft+"%"}).attr("y2",function(t){return t.forceFromTop+"%"}).attr("stroke","black").attr("stroke-width",4).attr("class","arrow").attr("marker-end","url(#arrow)");var e=this.svgContainer.selectAll("circle").data(this.graphicHolds);e.exit().remove(),e.enter().append("circle").merge(e).style("fill","green")}},mounted:function(){this.drawWall(),this.drawHolds(),this.drawForces()}},R={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{style:{"background-image":"url('"+this.getOngoingWallImg()+"')"},attrs:{id:"wall"}})},staticRenderFns:[]};var W=n("VU/8")(U,R,!1,function(t){n("YH0i")},"data-v-611f53e9",null).exports,D={props:{wallId:Number,users:Array},data:function(){return{show:!0,selectedUser:null}},methods:{onSubmit:function(t){t.preventDefault();var e={};e.wallId=this.wallId,e.userId=this.selectedUser.id,this.$emit("submit-climb",e)}}},E={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.show?n("b-form",{on:{submit:t.onSubmit}},[n("b-form-group",{attrs:{id:"userInputGroup",label:"User:","label-for":"userInput"}},[n("b-form-select",{attrs:{id:"userInput",options:t.users},model:{value:t.selectedUser,callback:function(e){t.selectedUser=e},expression:"selectedUser"}},[n("template",{slot:"first"},[n("option",{attrs:{disabled:""},domProps:{value:null}},[t._v("-- Select a user --")])])],2)],1),t._v(" "),n("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Submit")])],1):t._e()],1)},staticRenderFns:[]},k=n("VU/8")(D,E,!1,null,null,null).exports,F={props:{wallId:Number},components:{RealTimeHoldsGraph:W,FormClimb:k},computed:p()({},Object(v.d)({connected:function(t){return t.realtime.isConnected}}),Object(v.c)({getForceByHoldId:"realtime/getForceByHoldId",ongoingClimb:"realtime/ongoingClimb",users:"users/getUsersLabelledByName"}),{climb:function(){return void 0!==this.ongoingClimb(this.wallId)?this.ongoingClimb(this.wallId):void 0},holds:function(){return void 0!==this.climb?this.climb.holds:[]},climbId:function(){return void 0!==this.climb?this.climb.id:""},climbStatus:function(){return void 0!==this.climb?this.climb.status:"no_climb"}}),methods:p()({},Object(v.b)({createClimb:"climbs/createClimb",startClimb:"climbs/startClimb",endClimb:"climbs/endClimb",deleteClimb:"climbs/deleteClimb"}),{prepareButtonDisabled:function(){return"no_climb"!==this.climbStatus},deleteButtonDisabled:function(){return"ready"!==this.climbStatus},startButtonDisabled:function(){return"ready"!==this.climbStatus},endButtonDisabled:function(){return"start"!==this.climbStatus},onSubmitNewClimb:function(t){var e=t,n=this.$refs.modalSubmitRef;e.onResponse=function(t){n.hide()},this.createClimb(e)},onStart:function(t){t.preventDefault();var e={};e.climbId=this.climbId,this.startClimb(e)},onEnd:function(t){t.preventDefault();var e={};e.climbId=this.climbId,this.endClimb(e)},deleteAndHideModal:function(t){var e={},n=this.$refs.modalDeleteRef;e.climbId=this.climbId,e.onResponse=function(t){n.hide()},this.deleteClimb(e)},showPrepareModal:function(t){this.$refs.modalSubmitRef.show()},showDeleteModal:function(t){this.$refs.modalDeleteRef.show()}})},$={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",[n("b-row",[n("b-col",{attrs:{cols:"3"}},[n("b-button",{staticClass:"w-100 mb-1",attrs:{disabled:t.prepareButtonDisabled(),variant:"primary"},on:{click:t.showPrepareModal}},[t._v("Prepare")]),t._v(" "),n("b-button",{staticClass:"w-100 mb-1",attrs:{disabled:t.deleteButtonDisabled(),variant:"danger"},on:{click:t.showDeleteModal}},[t._v("Delete")]),t._v(" "),n("b-button",{staticClass:"w-100 mb-1",attrs:{disabled:t.startButtonDisabled(),variant:"success"},on:{click:t.onStart}},[t._v("Start")]),t._v(" "),n("b-button",{staticClass:"w-100",attrs:{disabled:t.endButtonDisabled(),variant:"danger"},on:{click:t.onEnd}},[t._v("End")]),t._v(" "),n("p",[t._v("Connected?"+t._s(t.connected))]),t._v(" "),t._l(t.holds,function(e){return n("b-card",{key:e.id,staticClass:"mb-1"},[n("b-card-body",[n("p",{staticClass:"card-text",staticStyle:{"text-align":"left"}},[n("ul",[n("li",[t._v("Id: "+t._s(e.id)+" ")]),t._v(" "),n("li",[t._v("Type: "+t._s(e.hold_type)+" ")]),t._v(" "),n("li",[t._v("Force 1: "+t._s(t.getForceByHoldId("x",e.id)))]),t._v(" "),n("li",[t._v("Force 2: "+t._s(t.getForceByHoldId("y",e.id)))]),t._v(" "),n("li",[t._v("Force 3: "+t._s(t.getForceByHoldId("z",e.id)))])])])])],1)})],2),t._v(" "),n("b-col",[t.climb?n("real-time-holds-graph",{attrs:{wallId:this.wallId}}):t._e()],1)],1),t._v(" "),n("b-modal",{ref:"modalSubmitRef",attrs:{centered:"","hide-footer":"",title:"Prepare Climb"}},[n("form-climb",{attrs:{users:t.users,wallId:this.wallId},on:{"submit-climb":t.onSubmitNewClimb}})],1),t._v(" "),n("b-modal",{ref:"modalDeleteRef",attrs:{centered:"","hide-footer":"",title:"Delete Climb"}},[n("div",[t._v("You are about to delete the climb "+t._s(t.climbId)+".")]),t._v(" "),n("div",[t._v("The procedure is irreversible. Do you want to proceed?")]),t._v(" "),n("b-btn",{staticClass:"mt-1",attrs:{variant:"danger"},on:{click:function(e){t.deleteAndHideModal()}}},[t._v("Delete")])],1)],1)},staticRenderFns:[]},S={components:{ClimbOngoing:n("VU/8")(F,$,!1,null,null,null).exports},data:function(){return{slide:0,sliding:null}},computed:p()({},Object(v.d)({walls:function(t){return t.walls.walls},climbs:function(t){return t.realtime.ongoingClimbs}}),Object(v.c)({ongoingClimb:"realtime/ongoingClimb"})),methods:p()({onSlideStart:function(t){this.sliding=!0},onSlideEnd:function(t){this.sliding=!1}},Object(v.b)({fetchWalls:"walls/fetchWalls",getOngoingClimbs:"realtime/getOngoingClimbs",fetchUsers:"users/fetchUsers"})),created:function(){this.fetchWalls(),this.getOngoingClimbs(),this.fetchUsers()}},O={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-carousel",{staticClass:"d-block",staticStyle:{"text-shadow":"1px 1px 2px #333","max-height":"inherit"},attrs:{id:"carousel1",controls:"",indicators:"",background:"#ababab",interval:0},on:{"sliding-start":t.onSlideStart,"sliding-end":t.onSlideEnd},model:{value:t.slide,callback:function(e){t.slide=e},expression:"slide"}},t._l(t.walls,function(t){return n("b-carousel-slide",{key:t.id,attrs:{"img-blank":""}},[n("climb-ongoing",{attrs:{wallId:t.id}})],1)}))},staticRenderFns:[]};var M={name:"HomePage",components:{ActiveWalls:n("VU/8")(S,O,!1,function(t){n("XlD4")},null,null).exports}},j={render:function(){var t=this.$createElement;return(this._self._c||t)("active-walls")},staticRenderFns:[]},B=n("VU/8")(M,j,!1,null,null,null).exports,V={name:"ListClimbs",computed:Object(v.d)({climbs:function(t){return t.climbs.climbs}}),methods:p()({},Object(v.b)({fetchClimbs:"climbs/fetchClimbs"})),created:function(){this.fetchClimbs({status:"end"})}},T={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._l(t.climbs,function(e){return n("b-card",{key:e.id,staticClass:"mb-1",attrs:{"no-body":""}},[n("b-card-body",[n("b-row",[n("b-col",[n("p",{staticClass:"card-text",staticStyle:{"text-align":"left"}},[n("ul",[n("li",[t._v("Climb #"+t._s(e.id))]),t._v(" "),n("li",[t._v("Climber: "+t._s(e.climber_name)+" ")]),t._v(" "),n("li",[t._v("Date: "+t._s(e.start_time)+" ")]),t._v(" "),n("li",[t._v("Wall grade: "+t._s(e.wall_grade)+" ")])])])])],1)],1)],1)}))},staticRenderFns:[]},P={name:"ClimbsHistory",components:{ListClimbs:n("VU/8")(V,T,!1,null,null,null).exports}},N={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("list-climbs")],1)},staticRenderFns:[]},L={components:{ClimbsHistory:n("VU/8")(P,N,!1,null,null,null).exports}},z={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("climbs-history")],1)},staticRenderFns:[]},A=n("VU/8")(L,z,!1,null,null,null).exports,G={props:{initialUser:Object},data:function(){return{show:!0}},computed:{user:function(){return i.a.util.extend({},this.initialUser)}},methods:{onSubmit:function(t){t.preventDefault(),this.$emit("submit-user",this.user)},onReset:function(t){var e=this;t.preventDefault(),this.user.name=this.initialUser.name,this.user.nickname=this.initialUser.nickname,this.user.email=this.initialUser.email,this.user.height=this.initialUser.height,this.user.weight=this.initialUser.weight,this.show=!1,this.$nextTick(function(){e.show=!0})}}},q={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.show?n("b-form",{on:{submit:t.onSubmit,reset:t.onReset}},[n("b-form-group",{attrs:{id:"nameInputGroup",label:"Name:","label-for":"nameInput",horizontal:""}},[n("b-form-input",{attrs:{id:"nameInput",type:"text",required:"",placeholder:"Enter name"},model:{value:t.user.name,callback:function(e){t.$set(t.user,"name",e)},expression:"user.name"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"nicknameInputGroup",label:"Nickname:","label-for":"nicknameInput",horizontal:""}},[n("b-form-input",{attrs:{id:"nicknameInput",type:"text",required:"",placeholder:"Enter nickname"},model:{value:t.user.nickname,callback:function(e){t.$set(t.user,"nickname",e)},expression:"user.nickname"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"emailInputGroup",label:"Email address:","label-for":"emailInput",description:"We'll never share your email with anyone else.",horizontal:""}},[n("b-form-input",{attrs:{id:"emailInput",type:"email",placeholder:"Enter email"},model:{value:t.user.email,callback:function(e){t.$set(t.user,"email",e)},expression:"user.email"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"heightInputGroup",label:"Height (in cm):","label-for":"heightInput",horizontal:""}},[n("b-form-input",{attrs:{id:"heightInput",required:""},model:{value:t.user.height,callback:function(e){t.$set(t.user,"height",e)},expression:"user.height"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"weightInputGroup",label:"Weight (in cm):","label-for":"weightInput",horizontal:""}},[n("b-form-input",{attrs:{id:"weightInput",required:""},model:{value:t.user.weight,callback:function(e){t.$set(t.user,"weight",e)},expression:"user.weight"}})],1),t._v(" "),n("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Submit")]),t._v(" "),n("b-button",{attrs:{type:"reset",variant:"danger"}},[t._v("Reset")])],1):t._e()],1)},staticRenderFns:[]},Y=n("VU/8")(G,q,!1,null,null,null).exports,J={components:{FormUser:Y},data:function(){return{toDeleteUser:{},toEditUser:{}}},computed:Object(v.d)({users:function(t){return t.users.users}}),methods:p()({},Object(v.b)({fetchUsers:"users/fetchUsers",deleteUser:"users/deleteUser",editUser:"users/editUser"}),{showEditModal:function(t){this.toEditUser=t,this.$refs.modalEditRef.show()},onSubmitEditedUser:function(t){var e=t,n=this.$refs.modalEditRef;e.onResponse=function(t){n.hide()},this.editUser(e)},showDeleteModal:function(t){this.toDeleteUser=t,this.$refs.modalDeleteRef.show()},deleteAndHideModal:function(t){var e={},n=this.$refs.modalDeleteRef;e.userId=this.toDeleteUser.id,e.onResponse=function(t){n.hide()},this.deleteUser(e)}}),created:function(){this.fetchUsers()}},X={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._l(t.users,function(e){return n("b-card",{key:e.id,staticClass:"mb-1"},[n("b-card-body",[n("b-row",[n("b-col",[n("p",{staticClass:"card-text",staticStyle:{"text-align":"left"}},[n("ul",[n("li",[t._v("Name: "+t._s(e.name)+" ")]),t._v(" "),n("li",[t._v("Nickname: "+t._s(e.nickname)+" ")]),t._v(" "),n("li",[t._v("Email: "+t._s(e.email)+" ")]),t._v(" "),n("li",[t._v("Height: "+t._s(e.height)+" ")]),t._v(" "),n("li",[t._v("Weight: "+t._s(e.weight)+" ")])])])]),t._v(" "),n("b-col",{attrs:{cols:"3"}},[n("b-row",{staticClass:"mb-1"},[n("b-button",{attrs:{type:"submit",variant:"primary"},on:{click:function(n){t.showEditModal(e)}}},[t._v("Edit")])],1),t._v(" "),n("b-row",[n("b-button",{attrs:{variant:"danger"},on:{click:function(n){t.showDeleteModal(e)}}},[t._v("Delete")])],1)],1)],1)],1)],1)}),t._v(" "),n("b-modal",{ref:"modalDeleteRef",attrs:{centered:"","hide-footer":"",title:"Delete Hold"}},[n("div",[t._v("You are about to delete the user "+t._s(this.toDeleteUser.id)+".")]),t._v(" "),n("div",[t._v("The procedure is irreversible. Do you want to proceed?")]),t._v(" "),n("b-btn",{staticClass:"mt-1",attrs:{variant:"danger"},on:{click:function(e){t.deleteAndHideModal()}}},[t._v("Delete")])],1),t._v(" "),n("b-modal",{ref:"modalEditRef",attrs:{centered:"","hide-footer":"",title:"Edit Hold"}},[n("form-user",{attrs:{initialUser:t.toEditUser},on:{"submit-user":t.onSubmitEditedUser}})],1)],2)},staticRenderFns:[]},K=n("VU/8")(J,X,!1,null,null,null).exports,Q={components:{FormUser:Y},methods:p()({onSubmitUser:function(t){this.createUser(t)}},Object(v.b)({createUser:"users/createUser"}))},Z={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("form-user",{attrs:{initialUser:{}},on:{"submit-user":this.onSubmitUser}})],1)},staticRenderFns:[]},tt={name:"UsersPage",components:{ListUsers:K,InsertUser:n("VU/8")(Q,Z,!1,null,null,null).exports}},et={render:function(){var t=this.$createElement,e=this._self._c||t;return e("b-container",[e("b-row",{staticClass:"mt-2"},[e("b-col",[e("insert-user")],1),this._v(" "),e("b-col",[e("list-users")],1)],1)],1)},staticRenderFns:[]},nt=n("VU/8")(tt,et,!1,null,null,null).exports,it={props:{initialHold:Object,wallIds:Array},data:function(){return{show:!0}},computed:{hold:function(){return i.a.util.extend({},this.initialHold)}},methods:{onSubmit:function(t){t.preventDefault(),this.$emit("submit-hold",this.hold)},onReset:function(t){var e=this;t.preventDefault(),this.hold.can_id=this.initialHold.can_id,this.hold.dist_from_sx=this.initialHold.dist_from_sx,this.hold.dist_from_bot=this.initialHold.dist_from_bot,this.hold.hold_type=this.initialHold.hold_type,this.hold.wall_id=this.initialHold.wall_id,this.show=!1,this.$nextTick(function(){e.show=!0})}}},ot={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.show?n("b-form",{on:{submit:t.onSubmit,reset:t.onReset}},[n("b-form-group",{attrs:{id:"canIdInputGroup",label:"Can ID:","label-for":"canIdInput",horizontal:""}},[n("b-form-input",{attrs:{id:"canIdInput",type:"text",required:"",placeholder:"Enter can ID"},model:{value:t.hold.can_id,callback:function(e){t.$set(t.hold,"can_id",e)},expression:"hold.can_id"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"distFromSxInputGroup",label:"Dist from left:","label-for":"distFromSxInput",horizontal:""}},[n("b-form-input",{attrs:{id:"distFromSxInput",type:"number",required:"",placeholder:"Enter distance from left edge (in cm)"},model:{value:t.hold.dist_from_sx,callback:function(e){t.$set(t.hold,"dist_from_sx",e)},expression:"hold.dist_from_sx"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"distFromBotInputGroup",label:"Dist from bottom:","label-for":"distFromBotInput",horizontal:""}},[n("b-form-input",{attrs:{id:"distFromBotInput",type:"number",required:"",placeholder:"Enter distance from bottom (in cm)"},model:{value:t.hold.dist_from_bot,callback:function(e){t.$set(t.hold,"dist_from_bot",e)},expression:"hold.dist_from_bot"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"holdTypeInputGroup",label:"Hold type:","label-for":"holdTypeInput",horizontal:""}},[n("b-form-input",{attrs:{id:"holdTypeInput",type:"text"},model:{value:t.hold.hold_type,callback:function(e){t.$set(t.hold,"hold_type",e)},expression:"hold.hold_type"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"wallIdInputGroup",label:"Wall ID:","label-for":"wallIdInput",horizontal:""}},[n("b-form-select",{attrs:{id:"wallIdInput",options:t.wallIds},model:{value:t.hold.wall_id,callback:function(e){t.$set(t.hold,"wall_id",e)},expression:"hold.wall_id"}},[n("template",{slot:"first"},[n("option",{domProps:{value:void 0}},[t._v("-- No wall --")])])],2)],1),t._v(" "),n("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Submit")]),t._v(" "),n("b-button",{attrs:{type:"reset",variant:"danger"}},[t._v("Reset")])],1):t._e()],1)},staticRenderFns:[]},lt=n("VU/8")(it,ot,!1,null,null,null).exports,rt={components:{FormHold:lt},data:function(){return{toDeleteHold:{},toEditHold:{}}},computed:p()({},Object(v.d)({holds:function(t){return t.holds.holds}}),Object(v.c)({wallIds:"walls/wallIds"})),created:function(){this.fetchHolds()},methods:p()({},Object(v.b)({fetchHolds:"holds/fetchHolds",deleteHold:"holds/deleteHold",editHold:"holds/editHold"}),{showEditModal:function(t){this.toEditHold=t,this.$refs.modalEditRef.show()},onSubmitEditedHold:function(t){var e=t,n=this.$refs.modalEditRef;e.onResponse=function(t){n.hide()},this.editHold(e)},showDeleteModal:function(t){this.toDeleteHold=t,this.$refs.modalDeleteRef.show()},deleteAndHideModal:function(t){var e={},n=this.$refs.modalDeleteRef;e.holdId=this.toDeleteHold.id,e.onResponse=function(t){n.hide()},this.deleteHold(e)}})},st={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._l(t.holds,function(e){return n("b-card",{key:e.id,staticClass:"mb-1"},[n("b-card-body",[n("b-row",[n("b-col",[n("p",{staticClass:"card-text",staticStyle:{"text-align":"left"}},[n("ul",[n("li",[t._v("Hold id: "+t._s(e.id)+" ")]),t._v(" "),n("li",[t._v("Can id: "+t._s(e.can_id)+" ")]),t._v(" "),n("li",[t._v("Distance from left edge: "+t._s(e.dist_from_sx)+" ")]),t._v(" "),n("li",[t._v("Distance from bottom: "+t._s(e.dist_from_bot)+" ")]),t._v(" "),n("li",[t._v("Hold type: "+t._s(e.hold_type)+" ")]),t._v(" "),n("li",[t._v("On wall: "+t._s(e.wall_id)+" ")])])])]),t._v(" "),n("b-col",{attrs:{cols:"3"}},[n("b-row",{staticClass:"mb-1"},[n("b-button",{attrs:{type:"submit",variant:"primary"},on:{click:function(n){t.showEditModal(e)}}},[t._v("Edit")])],1),t._v(" "),n("b-row",[n("b-button",{attrs:{variant:"danger"},on:{click:function(n){t.showDeleteModal(e)}}},[t._v("Delete")])],1)],1)],1)],1)],1)}),t._v(" "),n("b-modal",{ref:"modalDeleteRef",attrs:{centered:"","hide-footer":"",title:"Delete Hold"}},[n("div",[t._v("You are about to delete the hold "+t._s(this.toDeleteHold.id)+".")]),t._v(" "),n("div",[t._v("The procedure is irreversible. Do you want to proceed?")]),t._v(" "),n("b-btn",{staticClass:"mt-1",attrs:{variant:"danger"},on:{click:function(e){t.deleteAndHideModal()}}},[t._v("Delete")])],1),t._v(" "),n("b-modal",{ref:"modalEditRef",attrs:{centered:"","hide-footer":"",title:"Edit Hold"}},[n("form-hold",{attrs:{initialHold:t.toEditHold,wallIds:t.wallIds},on:{"submit-hold":t.onSubmitEditedHold}})],1)],2)},staticRenderFns:[]},at=n("VU/8")(rt,st,!1,null,null,null).exports,dt={components:{FormHold:lt},computed:p()({},Object(v.c)({wallIds:"walls/wallIds"})),methods:p()({onSubmitHold:function(t){this.createHold(t)}},Object(v.b)({createHold:"holds/createHold",fetchWalls:"walls/fetchWalls"})),created:function(){this.fetchWalls()}},ct={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("form-hold",{attrs:{initialHold:{},wallIds:this.wallIds},on:{"submit-hold":this.onSubmitHold}})],1)},staticRenderFns:[]},ut={name:"HoldsPage",components:{ListHolds:at,InsertHold:n("VU/8")(dt,ct,!1,null,null,null).exports}},mt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("b-container",[e("b-row",{staticClass:"mt-2"},[e("b-col",[e("insert-hold")],1),this._v(" "),e("b-col",[e("list-holds")],1)],1)],1)},staticRenderFns:[]},ft=n("VU/8")(ut,mt,!1,null,null,null).exports,ht={props:{initialWall:Object},data:function(){return{show:!0}},computed:{wall:function(){return i.a.util.extend({},this.initialWall)}},methods:{onSubmit:function(t){t.preventDefault(),this.$emit("submit-wall",this.wall)},onReset:function(t){var e=this;t.preventDefault(),this.wall.grade=this.initialWall.grade,this.wall.height=this.initialWall.height,this.wall.width=this.initialWall.width,this.show=!1,this.$nextTick(function(){e.show=!0})}}},bt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.show?n("b-form",{on:{submit:t.onSubmit,reset:t.onReset}},[n("b-form-group",{attrs:{id:"gradeInputGroup",label:"Wall grade:","label-for":"gradeInput",horizontal:""}},[n("b-form-input",{attrs:{id:"gradeInput",type:"text",required:"",placeholder:"Enter grade"},model:{value:t.wall.grade,callback:function(e){t.$set(t.wall,"grade",e)},expression:"wall.grade"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"heightInputGroup",label:"Height:","label-for":"heightInput",horizontal:""}},[n("b-form-input",{attrs:{id:"heightInput",type:"number",required:"",placeholder:"Enter height (in cm)"},model:{value:t.wall.height,callback:function(e){t.$set(t.wall,"height",e)},expression:"wall.height"}})],1),t._v(" "),n("b-form-group",{attrs:{id:"widthInputGroup",label:"Width:","label-for":"widthInput",horizontal:""}},[n("b-form-input",{attrs:{id:"widthInput",type:"number",required:"",placeholder:"Enter width (in cm)"},model:{value:t.wall.width,callback:function(e){t.$set(t.wall,"width",e)},expression:"wall.width"}})],1),t._v(" "),n("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Submit")]),t._v(" "),n("b-button",{attrs:{type:"reset",variant:"danger"}},[t._v("Reset")])],1):t._e()],1)},staticRenderFns:[]},pt=n("VU/8")(ht,bt,!1,null,null,null).exports,vt={components:{FormWall:pt},data:function(){return{toDeleteWall:{},toEditWall:{}}},computed:p()({},Object(v.d)({walls:function(t){return t.walls.walls}})),created:function(){this.fetchWalls()},methods:p()({},Object(v.b)({fetchWalls:"walls/fetchWalls",deleteWall:"walls/deleteWall",editWall:"walls/editWall"}),{getImg:x,showEditModal:function(t){this.toEditWall=t,this.$refs.modalEditRef.show()},onSubmitEditedWall:function(t){var e=t,n=this.$refs.modalEditRef;e.onResponse=function(t){n.hide()},this.editWall(e)},showDeleteModal:function(t){this.toDeleteWall=t,this.$refs.modalDeleteRef.show()},deleteAndHideModal:function(t){var e={},n=this.$refs.modalDeleteRef;e.wallId=this.toDeleteWall.id,e.onResponse=function(t){n.hide()},this.deleteWall(e)}})},gt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._l(t.walls,function(e){return n("b-card",{key:e.id,staticClass:"mb-1"},[n("b-card-body",[n("b-row",[n("b-col",[n("p",{staticClass:"card-text",staticStyle:{"text-align":"left"}},[n("ul",[n("li",[t._v("Wall id: "+t._s(e.id)+" ")]),t._v(" "),n("li",[t._v("Grade: "+t._s(e.grade)+" ")]),t._v(" "),n("li",[t._v("Height: "+t._s(e.height)+" ")]),t._v(" "),n("li",[t._v("Width: "+t._s(e.width)+" ")]),t._v(" "),n("li",[t._v("Background: "),n("div",{staticClass:"example-bg",style:{"background-image":"url('"+t.getImg(e.img)+"')"}})])])])]),t._v(" "),n("b-col",{attrs:{cols:"3"}},[n("b-row",{staticClass:"mb-1"},[n("b-button",{attrs:{type:"submit",variant:"primary"},on:{click:function(n){t.showEditModal(e)}}},[t._v("Edit")])],1),t._v(" "),n("b-row",[n("b-button",{attrs:{variant:"danger"},on:{click:function(n){t.showDeleteModal(e)}}},[t._v("Delete")])],1)],1)],1)],1)],1)}),t._v(" "),n("b-modal",{ref:"modalDeleteRef",attrs:{centered:"","hide-footer":"",title:"Delete Wall"}},[n("div",[t._v("You are about to delete the wall "+t._s(this.toDeleteWall.id)+".")]),t._v(" "),n("div",[t._v("The procedure is irreversible. Do you want to proceed?")]),t._v(" "),n("b-btn",{staticClass:"mt-1",attrs:{variant:"danger"},on:{click:function(e){t.deleteAndHideModal()}}},[t._v("Delete")])],1),t._v(" "),n("b-modal",{ref:"modalEditRef",attrs:{centered:"","hide-footer":"",title:"Edit Wall"}},[n("form-wall",{attrs:{initialWall:t.toEditWall},on:{"submit-wall":t.onSubmitEditedWall}})],1)],2)},staticRenderFns:[]};var _t=n("VU/8")(vt,gt,!1,function(t){n("KTDh")},"data-v-e6025b4e",null).exports,wt={components:{FormWall:pt},methods:p()({onSubmitWall:function(t){this.createWall(t)}},Object(v.b)({createWall:"walls/createWall"}))},It={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("form-wall",{attrs:{initialWall:{}},on:{"submit-wall":this.onSubmitWall}})],1)},staticRenderFns:[]},Ct={name:"WallsPage",components:{ListWalls:_t,InsertWall:n("VU/8")(wt,It,!1,null,null,null).exports}},Ht={render:function(){var t=this.$createElement,e=this._self._c||t;return e("b-container",[e("b-row",{staticClass:"mt-2"},[e("b-col",[e("insert-wall")],1),this._v(" "),e("b-col",[e("list-walls")],1)],1)],1)},staticRenderFns:[]},yt=n("VU/8")(Ct,Ht,!1,null,null,null).exports;i.a.use(h.a);var xt=new h.a({routes:[{path:"/homepage",name:"HomePage",label:"HomePage",component:B},{path:"/climbs",name:"Climbs",label:"Climbs",component:A},{path:"/users",name:"Users",label:"Users",component:nt},{path:"/holds",name:"Holds",label:"Holds",component:ft},{path:"/walls",name:"Walls",label:"Walls",component:yt},{path:"",redirect:"homepage"}]}),Ut=function(t,e,n){var i={};i.page=n.page,i.per_page=n.perPage;var o=H(i);C.get("walls"+o).then(function(e){return t(e)},function(t){return e(t)})},Rt=function(t,e,n){C.get("walls/"+n).then(function(e){return t(e)},function(t){return e(t)})},Wt=function(t,e,n){C.post("walls",n).then(function(e){return t(e)},function(t){return e(t)})},Dt=function(t,e,n){C.put("walls/"+n.id,n).then(function(e){return t(e)},function(t){return e(t)})},Et=function(t,e,n){C.delete("walls/"+n).then(function(e){return t(e)},function(t){return e(t)})},kt={namespaced:!0,state:{walls:[],wallsMeta:{}},getters:{wallIds:function(t){return t.walls.map(function(t){return t.id})}},actions:{fetchWalls:function(t,e){var n=t.commit;Ut(function(t){n("storeWalls",{walls:t.data.items}),n("storeWallsMeta",{meta:t.data._meta})},function(t){return y(t)},null!=e?e:{})},initWallsMeta:function(t,e){(0,t.commit)("storeWallsMeta",{meta:e})},createWall:function(t,e){Wt(function(e){return t.dispatch("fetchWalls")},function(t){return y(t)},e)},deleteWall:function(t,e){Et(function(n){t.dispatch("fetchWalls"),"function"==typeof e.onResponse&&e.onResponse(n)},function(t){return y(t)},e.wallId)},editWall:function(t,e){Dt(function(n){t.dispatch("fetchWalls"),"function"==typeof e.onResponse&&e.onResponse(n)},function(t){return y(t)},e)},getOngoingWall:function(t,e){Rt(function(e){t.commit("realtime/setOngoingWall",{ongoingWall:e.data},{root:!0})},function(t){return y(t)},e.wallId)}},mutations:{storeWalls:function(t,e){var n=e.walls;t.walls=n},storeWallsMeta:function(t,e){var n=e.meta;t.wallsMeta=n}}},Ft=function(t,e,n){var i={};i.status=n.status,i.not_status=n.not_status,i.user_id=n.userId,i.page=n.page,i.per_page=n.perPage;var o=H(i);C.get("climbs"+o).then(function(e){return t(e)},function(t){return e(t)})},$t=function(t,e,n){C.get("climbs/"+n).then(function(e){return t(e)},function(t){return e(t)})},St=function(t,e,n,i){var o={};o.wall_id=i.wallId,o.user_id=i.userId;var l=H(o);C.post("climbs"+l,n).then(function(e){return t(e)},function(t){return e(t)})},Ot=function(t,e,n){C.patch("climbs/"+n.id,n).then(function(e){return t(e)},function(t){return e(t)})},Mt=function(t,e,n){C.delete("climbs/"+n).then(function(e){return t(e)},function(t){return e(t)})},jt={namespaced:!0,state:{climbs:[],climbsMeta:{}},getters:{},actions:{fetchClimbs:function(t,e){var n=t.commit;Ft(function(t){n("storeClimbs",{climbs:t.data.items}),n("storeClimbsMeta",{meta:t.data._meta})},function(t){return y(t)},null!=e?e:{})},initClimbsMeta:function(t,e){(0,t.commit)("storeClimbsMeta",{meta:e})},createClimb:function(t,e){St(function(n){t.dispatch("realtime/getOngoingClimbs",null,{root:!0}),"function"==typeof e.onResponse&&e.onResponse(n)},function(t){return y(t)},e.climb,{userId:e.userId,wallId:e.wallId})},startClimb:function(t,e){var n={};n.id=e.climbId,n.status="start",Ot(function(e){t.dispatch("realtime/getOngoingClimbs",null,{root:!0})},function(t){return y(t)},n)},endClimb:function(t,e){var n={};n.id=e.climbId,n.status="end",Ot(function(e){t.dispatch("realtime/getOngoingClimbs",null,{root:!0})},function(t){return y(t)},n)},getClimb:function(t,e){$t(function(t){"function"==typeof e.onResponse&&e.onResponse(t)},function(t){return y(t)},e.climbId)},deleteClimb:function(t,e){Mt(function(n){t.dispatch("realtime/getOngoingClimbs",null,{root:!0}),"function"==typeof e.onResponse&&e.onResponse(n)},function(t){return y(t)},e.climbId)}},mutations:{storeClimbs:function(t,e){var n=e.climbs;t.climbs=n},storeClimbsMeta:function(t,e){var n=e.meta;t.climbsMeta=n}}},Bt=function(t,e,n){var i={};i.page=n.page,i.per_page=n.perPage;var o=H(i);C.get("users"+o).then(function(e){return t(e)},function(t){return e(t)})},Vt=function(t,e,n){C.post("users",n).then(function(e){return t(e)},function(t){return e(t)})},Tt=function(t,e,n){C.put("users/"+n.id,n).then(function(e){return t(e)},function(t){return e(t)})},Pt=function(t,e,n){C.delete("users/"+n).then(function(e){return t(e)},function(t){return e(t)})},Nt={namespaced:!0,state:{users:[],usersMeta:{}},getters:{getUsersLabelledByName:function(t){return t.users.map(function(t){return{text:t.name,value:t}})}},actions:{fetchUsers:function(t,e){var n=t.commit;Bt(function(t){n("storeUsers",{users:t.data.items}),n("storeUsersMeta",{meta:t.data._meta})},function(t){return y(t)},null!=e?e:{})},initUsersMeta:function(t,e){(0,t.commit)("storeUsersMeta",{meta:e})},createUser:function(t,e){Vt(function(e){return t.dispatch("fetchUsers")},function(t){return y(t)},e)},deleteUser:function(t,e){Pt(function(n){t.dispatch("fetchUsers"),"function"==typeof e.onResponse&&e.onResponse(n)},function(t){return y(t)},e.userId)},editUser:function(t,e){Tt(function(n){t.dispatch("fetchUsers"),"function"==typeof e.onResponse&&e.onResponse(n)},function(t){return y(t)},e)}},mutations:{storeUsers:function(t,e){var n=e.users;t.users=n},storeUsersMeta:function(t,e){var n=e.meta;t.usersMeta=n}}},Lt=function(t,e,n){var i={};i.wall_id=n.wallId,i.page=n.page,i.per_page=n.perPage;var o=H(i);C.get("holds"+o).then(function(e){return t(e)},function(t){return e(t)})},zt=function(t,e,n){C.post("holds",n).then(function(e){return t(e)},function(t){return e(t)})},At=function(t,e,n){C.put("holds/"+n.id,n).then(function(e){return t(e)},function(t){return e(t)})},Gt=function(t,e,n){C.delete("holds/"+n).then(function(e){return t(e)},function(t){return e(t)})},qt={namespaced:!0,state:{holds:[],holdsMeta:{}},getters:{holdsMap:function(t){return t.holds.reduce(function(t,e){return t[e.id]=e,t},{})}},actions:{fetchHolds:function(t,e){var n=t.commit;Lt(function(t){n("storeHolds",{holds:t.data.items}),n("storeHoldsMeta",{meta:t.data._meta})},function(t){return y(t)},null!=e?e:{})},initHoldsMeta:function(t,e){(0,t.commit)("storeHoldsMeta",{meta:e})},getOngoingHolds:function(t,e){Lt(function(e){t.commit("realtime/setOngoingHolds",{ongoingHolds:e.data.items},{root:!0})},function(t){return y(t)},e)},createHold:function(t,e){zt(function(e){return t.dispatch("fetchHolds")},function(t){return y(t)},e)},deleteHold:function(t,e){Gt(function(n){t.dispatch("fetchHolds"),"function"==typeof e.onResponse&&e.onResponse(n)},function(t){return y(t)},e.holdId)},editHold:function(t,e){At(function(n){t.dispatch("fetchHolds"),"function"==typeof e.onResponse&&e.onResponse(n)},function(t){return y(t)},e)}},mutations:{storeHolds:function(t,e){var n=e.holds;t.holds=n},storeHoldsMeta:function(t,e){var n=e.meta;t.holdsMeta=n}}},Yt={namespaced:!0,state:{isConnected:!1,rtholds:{},ongoingClimbs:{}},getters:{getForceByHoldId:function(t){return function(e,n){return null==t.rtholds[n]?null:t.rtholds[n][e]}},ongoingClimb:function(t){return function(e){return t.ongoingClimbs[e]}}},actions:{socket_connect:function(t,e){t.commit("changeConnectionState",{isConnected:!0})},socket_disconnect:function(t,e){t.commit("changeConnectionState",{isConnected:!1})},socket_json:function(t,e){t.commit("storeRecord",{record:JSON.parse(e)})},getOngoingClimbs:function(t){Ft(function(e){t.commit("clearOngoingClimbs"),e.data.items.forEach(function(e){t.commit("addOngoingClimb",{ongoingClimb:e}),t.dispatch("addOngoingWall",{wallId:e.wall_id}),t.dispatch("addOngoingHolds",{wallId:e.wall_id})})},function(t){return y(t)},{not_status:"end"})},addOngoingWall:function(t,e){Rt(function(e){t.commit("addOngoingWall",{ongoingWall:e.data})},function(t){return y(t)},e.wallId)},addOngoingHolds:function(t,e){Lt(function(n){t.commit("addOngoingHolds",{wallId:e.wallId,ongoingHolds:n.data.items})},function(t){return y(t)},e)}},mutations:{changeConnectionState:function(t,e){var n=e.isConnected;t.isConnected=n},storeRecord:function(t,e){var n=e.record;i.a.set(t.rtholds,n.hold_id,{x:n.x,y:n.y,z:n.z})},clearOngoingClimbs:function(t){t.ongoingClimbs={},t.rtholds={}},addOngoingClimb:function(t,e){var n=e.ongoingClimb;i.a.set(t.ongoingClimbs,n.wall_id,n)},addOngoingWall:function(t,e){var n=e.ongoingWall;i.a.set(t.ongoingClimbs[n.id],"height",n.height),i.a.set(t.ongoingClimbs[n.id],"width",n.width),i.a.set(t.ongoingClimbs[n.id],"img",n.img)},addOngoingHolds:function(t,e){var n=e.wallId,o=e.ongoingHolds;i.a.set(t.ongoingClimbs[n],"holds",o)}}};i.a.use(v.a);var Jt=new v.a.Store({modules:{walls:kt,climbs:jt,users:Nt,holds:qt,realtime:Yt}});n("Jmt5"),n("9M+g");i.a.config.productionTip=!1,i.a.use(l.a),i.a.use(new s.a({debug:!0,connection:d()("http://2.238.75.128/api/climbs",{path:"/api/socket.io",transports:["websocket"]}),vuex:{store:Jt,actionPrefix:"socket_"}})),new i.a({el:"#app",store:Jt,router:xt,components:{App:f},template:"<App/>"})},XlD4:function(t,e){},YH0i:function(t,e){},YV4C:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.b51a978124ea4de58686.js.map